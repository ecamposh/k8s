## ~/.kube/config

ssh -o ServerAliveInterval=3000 ServerAliveCountMax=10 <username>@<IP_Address>

openssl genrsa -out my_user.key 2048

openssl req -new -key my_user.key -out my_user.csr -subj "/CN=my_user/O=my_group"

openssl x509 -req -in my_user.csr 

ls -ltrha /etc/kubernetes/pki/ca*

sudo openssl x509 -req -in my_user.csr -CAcreateserial -CA /etc/kubernetes/pki/ca.crt -CAkey /etc/kubernetes/pki/ca.key -out my_user.crt -days 1000

ls -la

my_user.key
my_user.crt

rm -rf my_user.csr

kubectl --kubeconfig=my_user.config config set-cluster my_user_cluster

## Grab server endpoint from the following file

cat ~/.kube/config

kubectl --kubeconfig=my_user.config config set-cluster my_user_cluster --server=https://<Cluster_Server_IP_Address>:<6443> --help

kubectl --kubeconfig=my_user.config config set-cluster my_user_cluster --certificate-authority=/etc/kubernetes/pki/ca.crt

cat my_user.config

kubectl --kubeconfig=my_user.config config set-cluster my_user_cluster --certificate-authority=/etc/kubernetes/pki/ca.crt --embed-certs

cat my_user.config

kubectl --kubeconfig=my_user.config config set-credentials --embed-certs --client-certificate=my_user.crt --client-key=my_user.key 'my_user' --username 'my_user'

kubectl --kubeconfig=my_user.config config set-context --help

kubectl --kubeconfig my_user.config config set-context my_user_ctx --cluster my_user_cluster --user my_user

kubectl --kubeconfig my_user.config config set-context my_user_ctx --cluster my_user_cluster --user my_user --namespace my_group

cat my_user.config

kubectl --kubeconfig my_user.config config use-context my_user_ctx





